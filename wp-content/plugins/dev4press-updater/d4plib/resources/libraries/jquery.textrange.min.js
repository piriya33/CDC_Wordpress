/**
 * jquery-textrange
 *
 * A jQuery plugin for getting, setting and replacing the selected text in input fields and textareas.
 * See the [README](https://github.com/dwieeb/jquery-textrange/blob/1.x/README.md) for usage and examples.
 *
 * (c) 2012-2017 Daniel Imhoff <dwieeb@gmail.com> - dwieeb.com
 */

(function(a){if(typeof define==='function'&&define.amd){define(['jquery'],a)}else if(typeof exports==='object'){a(require('jquery'))}else{a(jQuery)}})(function($){var j,textrange={get:function(a){return _textrange[j].get.apply(this,[a])},set:function(a,b){var s=parseInt(a),l=parseInt(b),e;if(typeof a==='undefined'){s=0}else if(a<0){s=this[0].value.length+s}if(typeof b!=='undefined'){if(b>=0){e=s+l}else{e=this[0].value.length+l}}_textrange[j].set.apply(this,[s,e]);return this},setcursor:function(a){return this.textrange('set',a,0)},replace:function(a){_textrange[j].replace.apply(this,[String(a)]);return this},insert:function(a){return this.textrange('replace',a)}},_textrange={xul:{get:function(a){var b={position:this[0].selectionStart,start:this[0].selectionStart,end:this[0].selectionEnd,length:this[0].selectionEnd-this[0].selectionStart,text:this.val().substring(this[0].selectionStart,this[0].selectionEnd)};return typeof a==='undefined'?b:b[a]},set:function(a,b){if(typeof b==='undefined'){b=this[0].value.length}this[0].selectionStart=a;this[0].selectionEnd=b},replace:function(a){var b=this[0].selectionStart;var c=this[0].selectionEnd;var d=this.val();this.val(d.substring(0,b)+a+d.substring(c,d.length));this[0].selectionStart=b;this[0].selectionEnd=b+a.length}},msie:{get:function(a){var b=document.selection.createRange();if(typeof b==='undefined'){var c={position:0,start:0,end:this.val().length,length:this.val().length,text:this.val()};return typeof a==='undefined'?c:c[a]}var d=0;var e=0;var f=this[0].value.length;var g=this[0].value.replace(/\r\n/g,'\n');var h=this[0].createTextRange();var i=this[0].createTextRange();h.moveToBookmark(b.getBookmark());i.collapse(false);if(h.compareEndPoints('StartToEnd',i)===-1){d=-h.moveStart('character',-f);d+=g.slice(0,d).split('\n').length-1;if(h.compareEndPoints('EndToEnd',i)===-1){e=-h.moveEnd('character',-f);e+=g.slice(0,e).split('\n').length-1}else{e=f}}else{d=f;e=f}var c={position:d,start:d,end:e,length:f,text:b.text};return typeof a==='undefined'?c:c[a]},set:function(a,b){var c=this[0].createTextRange();if(typeof c==='undefined'){return}if(typeof b==='undefined'){b=this[0].value.length}var d=a-(this[0].value.slice(0,a).split("\r\n").length-1);var e=b-(this[0].value.slice(0,b).split("\r\n").length-1);c.collapse(true);c.moveEnd('character',e);c.moveStart('character',d);c.select()},replace:function(a){document.selection.createRange().text=a}}};$.fn.extend({textrange:function(a){var b='get';var c={};if(typeof this[0]==='undefined'){return this}if(typeof a==='string'){b=a}else if(typeof a==='object'){b=a.method||b;c=a}if(typeof j==='undefined'){j='selectionStart'in this[0]?'xul':document.selection?'msie':'unknown'}if(j==='unknown'){return this}if(!c.nofocus&&document.activeElement!==this[0]){this[0].focus()}if(typeof textrange[b]==='function'){return textrange[b].apply(this,Array.prototype.slice.call(arguments,1))}else{$.error("Method "+b+" does not exist in jQuery.textrange")}}})});
