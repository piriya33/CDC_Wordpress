var d4plib_admin;!function(r,n,e,t){(d4plib_admin={scroll_offset:40,active_element:null,init:function(){r(".d4p-nav-button > a").click(function(e){e.preventDefault(),r(this).next().slideToggle("fast")}),setTimeout(function(){r(".d4p-wrap .updated").slideUp("slow")},4e3),r(n).bind("load resize orientationchange",function(){e.body.clientWidth<800?d4plib_admin.scroll_offset=60:d4plib_admin.scroll_offset=40,e.body.clientWidth<640?r(".d4p-panel-scroller").removeClass("d4p-scroll-active"):r(".d4p-panel-scroller").addClass("d4p-scroll-active")}),r(".d4p-check-uncheck a").click(function(e){e.preventDefault();var t="checkall"===r(this).attr("href").substr(1);r(this).parent().parent().find("input[type=checkbox]").prop("checked",t)})},settings:function(){"undefined"!=typeof d4plib_media_image&&null!==d4plib_media_image&&d4plib_media_image.init(),r.numeric&&(r(".d4p-setting-number input, .d4p-field-number").numeric(),r(".d4p-setting-integer input, .d4p-field-integer").numeric({decimalPlaces:0,negative:!1})),r(".d4p-color-picker").wpColorPicker(),r(e).on("click",".d4p-group h3 i.fa.fa-caret-down, .d4p-group h3 i.fa.fa-caret-up",function(){var e=r(this).hasClass("fa-caret-down"),t=r(this).parent().next();e?(r(this).removeClass("fa-caret-down").addClass("fa-caret-up"),t.slideDown(300)):(r(this).removeClass("fa-caret-up").addClass("fa-caret-down"),t.slideUp(300))}),r(e).on("click",".d4p-section-toggle .d4p-toggle-title",function(){var e=r(this).find("i.fa"),t=e.hasClass("fa-caret-down"),a=r(this).next();t?(e.removeClass("fa-caret-down").addClass("fa-caret-up"),a.slideDown(300)):(e.removeClass("fa-caret-up").addClass("fa-caret-down"),a.slideUp(300))}),r(e).on("click",".d4p-setting-expandable_pairs .button-secondary",function(e){e.preventDefault();var t=r(this).parent();t.fadeOut(200,function(){t.remove()})}),r(".d4p-setting-expandable_pairs a.button-primary").click(function(e){e.preventDefault();var t=r(this).closest(".d4p-setting-expandable_pairs"),a=r(".d4p-next-id",t),n=a.val(),i=r(".pair-element-0",t).clone();r("input",i).each(function(){var e=r(this).attr("id").replace("_0_","_"+n+"_"),t=r(this).attr("name").replace("[0]","["+n+"]");r(this).attr("id",e).attr("name",t)}),i.attr("class","pair-element-"+n).fadeIn(),r(this).before(i),n++,a.val(n)}),r(e).on("click",".d4p-setting-expandable_text .button-secondary",function(e){d4plib_admin.handlers.expendable_text_remove(this,e)}),r(e).on("click",".d4p-setting-expandable_raw .button-secondary",function(e){d4plib_admin.handlers.expendable_text_remove(this,e)}),r(".d4p-setting-expandable_text a.button-primary").click(function(e){d4plib_admin.handlers.expendable_text_add(this,e,".d4p-setting-expandable_text")}),r(".d4p-setting-expandable_raw a.button-primary").click(function(e){d4plib_admin.handlers.expendable_text_add(this,e,".d4p-setting-expandable_raw")})},scroller:function(){var e=r(".d4p-panel-scroller"),t=r(n);if(0<e.length){var a=e.offset();t.scroll(function(){t.scrollTop()>a.top&&e.hasClass("d4p-scroll-active")?e.stop().animate({marginTop:t.scrollTop()-a.top+d4plib_admin.scroll_offset}):e.stop().animate({marginTop:0})})}},handlers:{expendable_text_remove:function(e,t){t.preventDefault();var a=r(e).parent();a.fadeOut(200,function(){a.remove()})},expendable_text_add:function(e,t,a){t.preventDefault();var n=r(e).closest(a),i=r(".d4p-next-id",n),l=i.val(),d=r(".exp-text-element-0",n).clone();r("input",d).each(function(){var e=r(this).attr("id").replace("_0_","_"+l+"_"),t=r(this).attr("name").replace("[0]","["+l+"]");r(this).attr("id",e).attr("name",t)}),d.attr("class","exp-text-element exp-text-element-"+l).fadeIn(),r("ol",n).append(d),l++,i.val(l)}}}).init(),d4plib_admin.settings(),d4plib_admin.scroller()}(jQuery,window,document);