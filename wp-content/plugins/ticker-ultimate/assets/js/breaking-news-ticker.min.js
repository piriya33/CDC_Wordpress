!function(x){"use strict";x.breakingNews=function(e,t){var s={effect:"scroll",direction:"ltr",height:40,fontSize:"default",themeColor:"default",background:"default",borderWidth:1,radius:2,source:"html",play:!0,delayTimer:4e3,scrollSpeed:2,stopOnHover:!0,position:"auto",zIndex:99999},a=this;a.settings={};function l(){var e;"scroll"===a.settings.effect&&(e=0,p.each(function(){e+=x(this).outerWidth()}),e+=10,f.css({width:e}))}function i(){"rtl"===a.settings.direction?f.stop().animate({marginRight:-f.find("li:first-child").outerWidth()},300,function(){f.find("li:first-child").insertAfter(f.find("li:last-child")),f.css({marginRight:0}),w=!0}):f.stop().animate({marginLeft:-f.find("li:first-child").outerWidth()},300,function(){f.find("li:first-child").insertAfter(f.find("li:last-child")),f.css({marginLeft:0}),w=!0})}function n(){"rtl"===a.settings.direction?(0<=parseInt(f.css("marginRight"),10)&&(f.css({"margin-right":-f.find("li:last-child").outerWidth()}),f.find("li:last-child").insertBefore(f.find("li:first-child"))),f.stop().animate({marginRight:0},300,function(){w=!0})):(0<=parseInt(f.css("marginLeft"),10)&&(f.css({"margin-left":-f.find("li:last-child").outerWidth()}),f.find("li:last-child").insertBefore(f.find("li:first-child"))),f.stop().animate({marginLeft:0},300,function(){w=!0}))}var c=x(e),e=e,d=c.children(".wpos-label"),f=c.children(".wpos-news").children("ul"),p=f.children("li"),r=c.children(".wpos-controls"),g=r.find(".wpos-prev").parent(),u=r.find(".wpos-action").parent(),h=r.find(".wpos-next").parent(),m=!1,w=!0,k=f.children("li").length,o=0,v=!1,y=function(){var e=parseFloat(f.css("marginLeft"));e-=a.settings.scrollSpeed/2,f.css({marginLeft:e}),e<=-f.find("li:first-child").outerWidth()&&(f.find("li:first-child").insertAfter(f.find("li:last-child")),f.css({marginLeft:0})),!1===m&&(window.requestAnimationFrame&&requestAnimationFrame(y)||setTimeout(y,16))},b=function(){var e=parseFloat(f.css("marginRight"));e-=a.settings.scrollSpeed/2,f.css({marginRight:e}),e<=-f.find("li:first-child").outerWidth()&&(f.find("li:first-child").insertAfter(f.find("li:last-child")),f.css({marginRight:0})),!1===m&&(window.requestAnimationFrame&&requestAnimationFrame(b)||setTimeout(b,16))},C=function(){switch(w=!0,a.settings.effect){case"typography":f.find("li").hide(),f.find("li").eq(o).width(30).show(),f.find("li").eq(o).animate({width:"100%",opacity:1},1500);break;case"fade":f.find("li").hide(),f.find("li").eq(o).fadeIn();break;case"slide-down":f.find("li.wpos-ticker-active").animate({top:30,opacity:0},300,function(){x(this).removeClass("wpos-ticker-active").hide()}),f.find("li").eq(o).css({top:-30,opacity:0}).addClass("wpos-ticker-active").show(),f.find("li").eq(o).animate({top:0,opacity:1},300);break;case"slide-up":f.find("li.wpos-ticker-active").animate({top:-30,opacity:0},300,function(){x(this).removeClass("wpos-ticker-active").hide()}),f.find("li").eq(o).css({top:30,opacity:0}).addClass("wpos-ticker-active").show(),f.find("li").eq(o).animate({top:0,opacity:1},300);break;case"slide-left":f.find("li.wpos-ticker-active").animate({left:"50%",opacity:0},300,function(){x(this).removeClass("wpos-ticker-active").hide()}),f.find("li").eq(o).css({left:-50,opacity:0}).addClass("wpos-ticker-active").show(),f.find("li").eq(o).animate({left:0,opacity:1},300);break;case"slide-right":f.find("li.wpos-ticker-active").animate({left:"-50%",opacity:0},300,function(){x(this).removeClass("wpos-ticker-active").hide()}),f.find("li").eq(o).css({left:"50%",opacity:0}).addClass("wpos-ticker-active").show(),f.find("li").eq(o).animate({left:0,opacity:1},300);break;default:f.find("li").hide(),f.find("li").eq(o).show()}},q=function(){if(m=!1,a.settings.play)switch(a.settings.effect){case"scroll":("rtl"===a.settings.direction?b:y)();break;default:a.pause(),v=setInterval(function(){a.next()},a.settings.delayTimer)}};a.init=function(){if(a.settings=x.extend({},s,t),"fixed-top"===a.settings.position?c.addClass("wpos-fixed-top").css({"z-index":a.settings.zIndex}):"fixed-bottom"===a.settings.position&&c.addClass("wpos-fixed-bottom").css({"z-index":a.settings.zIndex}),"default"!=a.settings.fontSize&&c.css({"font-size":a.settings.fontSize}),"default"!=a.settings.themeColor&&(c.css({"border-color":a.settings.themeColor,color:a.settings.themeColor}),d.css({background:a.settings.themeColor})),"default"!=a.settings.background&&c.css({background:a.settings.background}),c.css({height:a.settings.height,"line-height":a.settings.height-2*a.settings.borderWidth+"px","border-radius":a.settings.radius,"border-width":a.settings.borderWidth}),p.find(".wpos-seperator").css({height:a.settings.height-2*a.settings.borderWidth}),c.addClass("wpos-effect-"+a.settings.effect+" wpos-direction-"+a.settings.direction),l(),"object"==typeof a.settings.source)switch(a.settings.source.type){case"rss":"rss2json"===a.settings.source.usingApi?((o=new XMLHttpRequest).onreadystatechange=function(){if(4==o.readyState&&200==o.status){var e=JSON.parse(o.responseText),t="",s="";switch(a.settings.source.showingField){case"title":s="title";break;case"description":s="description";break;case"link":s="link";break;default:s="title"}var i="";void 0!==a.settings.source.seperator&&(a.settings.source.seperator,1)&&(i=a.settings.source.seperator);for(var n=0;n<e.items.length;n++)a.settings.source.linkEnabled?t+='<li><a target="'+a.settings.source.target+'" href="'+e.items[n].link+'">'+i+e.items[n][s]+"</a></li>":t+="<li><a>"+i+e.items[n][s]+"</a></li>";f.empty().append(t),p=f.children("li"),k=f.children("li").length,l(),"scroll"!=a.settings.effect&&C(),p.find(".wpos-seperator").css({height:a.settings.height-2*a.settings.borderWidth}),q()}},o.open("GET","https://api.rss2json.com/v1/api.json?rss_url="+a.settings.source.url,!0),o.send()):((r=new XMLHttpRequest).open("GET","https://query.yahooapis.com/v1/public/yql?q="+encodeURIComponent('select * from rss where url="'+a.settings.source.url+'" limit '+a.settings.source.limit)+"&format=json",!0),r.onreadystatechange=function(){if(4==r.readyState)if(200==r.status){var e=JSON.parse(r.responseText),t="",s="";switch(a.settings.source.showingField){case"title":s="title";break;case"description":s="description";break;case"link":s="link";break;default:s="title"}var i="";"undefined"!=a.settings.source.seperator&&void 0!==a.settings.source.seperator&&(i=a.settings.source.seperator);for(var n=0;n<e.query.results.item.length;n++)a.settings.source.linkEnabled?t+='<li><a target="'+a.settings.source.target+'" href="'+e.query.results.item[n].link+'">'+i+e.query.results.item[n][s]+"</a></li>":t+="<li><a>"+i+e.query.results.item[n][s]+"</a></li>";f.empty().append(t),p=f.children("li"),k=f.children("li").length,l(),"scroll"!=a.settings.effect&&C(),p.find(".wpos-seperator").css({height:a.settings.height-2*a.settings.borderWidth}),q()}else f.empty().append('<li><span class="wpos-loader-text">'+a.settings.source.errorMsg+"</span></li>")},r.send(null));break;case"json":x.getJSON(a.settings.source.url,function(e){var t="",s="",s="undefined"===a.settings.source.showingField?"title":a.settings.source.showingField,i="";void 0!==a.settings.source.seperator&&(a.settings.source.seperator,1)&&(i=a.settings.source.seperator);for(var n=0;n<e.length&&!(n>=a.settings.source.limit);n++)a.settings.source.linkEnabled?t+='<li><a target="'+a.settings.source.target+'" href="'+e[n].link+'">'+i+e[n][s]+"</a></li>":t+="<li><a>"+i+e[n][s]+"</a></li>","undefined"===e[n][s]&&console.log('"'+s+'" does not exist in this json.');f.empty().append(t),p=f.children("li"),k=f.children("li").length,l(),"scroll"!=a.settings.effect&&C(),p.find(".wpos-seperator").css({height:a.settings.height-2*a.settings.borderWidth}),q()});break;default:console.log('Please check your "source" object parameter. Incorrect Value')}else"html"===a.settings.source?("scroll"!=a.settings.effect&&C(),q()):console.log('Please check your "source" parameter. Incorrect Value');var r,o;a.settings.play?u.find("span").removeClass("wpos-play").addClass("wpos-pause"):u.find("span").removeClass("wpos-pause").addClass("wpos-play"),c.on("mouseleave",function(e){var t=x(document.elementFromPoint(e.clientX,e.clientY)).parents(".wpos-breaking-news")[0];x(this)[0]!==t&&(!0===a.settings.stopOnHover?!0===a.settings.play&&a.play():!0===a.settings.play&&!0===m&&a.play())}),c.on("mouseenter",function(){!0===a.settings.stopOnHover&&a.pause()}),h.on("click",function(){w&&(w=!1,a.pause(),a.next())}),g.on("click",function(){w&&(w=!1,a.pause(),a.prev())}),u.on("click",function(){w&&(u.find("span").hasClass("wpos-pause")?(u.find("span").removeClass("wpos-pause").addClass("wpos-play"),a.stop()):(a.settings.play=!0,u.find("span").removeClass("wpos-play").addClass("wpos-pause")))}),x(window).on("resize",function(){var e;"scroll"===a.settings.effect&&(e=0,p.each(function(){e+=x(this).outerWidth()}),e+=10,f.css({width:e}))})},a.pause=function(){m=!0,clearInterval(v)},a.stop=function(){m=!0,a.settings.play=!1},a.play=function(){q()},a.next=function(){!function(){switch(a.settings.effect){case"scroll":i();break;default:k<=++o&&(o=0),C()}}()},a.prev=function(){!function(){switch(a.settings.effect){case"scroll":n();break;default:--o<0&&(o=k-1),C()}}()},a.init()},x.fn.breakingNews=function(t){return this.each(function(){var e;null==x(this).data("breakingNews")&&(e=new x.breakingNews(this,t),x(this).data("breakingNews",e))})}}(jQuery);