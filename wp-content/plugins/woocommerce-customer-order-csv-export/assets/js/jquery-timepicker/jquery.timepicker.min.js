"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(g){var c=new Date(1970,1,1,0,0,0),k=86400,n={className:null,minTime:null,maxTime:null,durationTime:null,step:30,showDuration:!1,timeFormat:"g:ia",scrollDefaultNow:!1,scrollDefaultTime:!1,selectOnBlur:!1,disableTouchKeyboard:!1,forceRoundTime:!1,appendTo:"body",orientation:"ltr",disableTimeRanges:[],closeOnWindowScroll:!1,typeaheadHighlight:!0,noneOption:!1},v={am:"am",pm:"pm",AM:"AM",PM:"PM",decimal:".",mins:"mins",hr:"hr",hrs:"hrs"},T={init:function(r){return this.each(function(){var e,i=g(this),t=[];for(e in n)i.data(e)&&(t[e]=i.data(e));var a=g.extend({},n,t,r);a.lang&&(v=g.extend(v,a.lang)),a=s(a),i.data("timepicker-settings",a),i.addClass("ui-timepicker-input"),a.useSelect?o(i):(i.prop("autocomplete","off"),i.on("click.timepicker focus.timepicker",T.show),i.on("change.timepicker",u),i.on("keydown.timepicker",p),i.on("keyup.timepicker",d),u.call(i.get(0)))})},show:function(e){e&&e.preventDefault();var i=g(this),t=i.data("timepicker-settings");if(t.useSelect)i.data("timepicker-list").focus();else{w(i)&&i.blur();var a=i.data("timepicker-list");if(!i.prop("readonly")&&(a&&0!==a.length&&"function"!=typeof t.durationTime||(o(i),a=i.data("timepicker-list")),!a.is(":visible"))){T.hide(),a.show();e={};"rtl"==t.orientation?e.left=i.offset().left+i.outerWidth()-a.outerWidth()+parseInt(a.css("marginLeft").replace("px",""),10):e.left=i.offset().left+parseInt(a.css("marginLeft").replace("px",""),10),i.offset().top+i.outerHeight(!0)+a.outerHeight()>g(window).height()+g(window).scrollTop()?e.top=i.offset().top-a.outerHeight()+parseInt(a.css("marginTop").replace("px",""),10):e.top=i.offset().top+i.outerHeight()+parseInt(a.css("marginTop").replace("px",""),10),a.offset(e);e=a.find(".ui-timepicker-selected");return e.length||(m(i)?e=l(i,a,R(m(i))):t.scrollDefaultNow?e=l(i,a,R(new Date)):!1!==t.scrollDefaultTime&&(e=l(i,a,R(t.scrollDefaultTime)))),e&&e.length?(e=a.scrollTop()+e.position().top-e.outerHeight(),a.scrollTop(e)):a.scrollTop(0),g(document).on("touchstart.ui-timepicker mousedown.ui-timepicker",r),t.closeOnWindowScroll&&g(document).on("scroll.ui-timepicker",r),i.trigger("showTimepicker"),this}}},hide:function(e){var i=g(this),t=i.data("timepicker-settings");return t&&t.useSelect&&i.blur(),g(".ui-timepicker-wrapper:visible").each(function(){var e=g(this),i=e.data("timepicker-input"),t=i.data("timepicker-settings");t&&t.selectOnBlur&&C(i),e.hide(),i.trigger("hideTimepicker")}),this},option:function(e,i){var t=this,a=t.data("timepicker-settings"),r=t.data("timepicker-list");if("object"==(void 0===e?"undefined":_typeof(e)))a=g.extend(a,e);else if("string"==typeof e&&void 0!==i)a[e]=i;else if("string"==typeof e)return a[e];return a=s(a),t.data("timepicker-settings",a),r&&(r.remove(),t.data("timepicker-list",!1)),a.useSelect&&o(t),this},getSecondsFromMidnight:function(){return R(m(this))},getTime:function(e){var i=m(this);if(!i)return null;e=e||new Date;i=R(i),e=new Date(e);return e.setHours(i/3600),e.setMinutes(i%3600/60),e.setSeconds(i%60),e.setMilliseconds(0),e},setTime:function(e){var i=this,e=S(R(e),i.data("timepicker-settings").timeFormat);return H(i,e),i.data("timepicker-list")&&x(i,i.data("timepicker-list")),this},remove:function(){var e=this;if(e.hasClass("ui-timepicker-input"))return e.removeAttr("autocomplete","off"),e.removeClass("ui-timepicker-input"),e.removeData("timepicker-settings"),e.off(".timepicker"),e.data("timepicker-list")&&e.data("timepicker-list").remove(),e.removeData("timepicker-list"),this}};function s(e){if(e.minTime&&(e.minTime=R(e.minTime)),e.maxTime&&(e.maxTime=R(e.maxTime)),e.durationTime&&"function"!=typeof e.durationTime&&(e.durationTime=R(e.durationTime)),0<e.disableTimeRanges.length){for(var i in e.disableTimeRanges)e.disableTimeRanges[i]=[R(e.disableTimeRanges[i][0]),R(e.disableTimeRanges[i][1])];e.disableTimeRanges=e.disableTimeRanges.sort(function(e,i){return e[0]-i[0]});for(i=e.disableTimeRanges.length-1;0<i;i--)e.disableTimeRanges[i][0]<=e.disableTimeRanges[i-1][1]&&(e.disableTimeRanges[i-1]=[Math.min(e.disableTimeRanges[i][0],e.disableTimeRanges[i-1][0]),Math.max(e.disableTimeRanges[i][1],e.disableTimeRanges[i-1][1])],e.disableTimeRanges.splice(i,1))}return e}function o(i){var t,e=i.data("timepicker-settings"),a=i.data("timepicker-list");if(a&&a.length&&(a.remove(),i.data("timepicker-list",!1)),e.useSelect?t=a=g("<select />",{class:"ui-timepicker-select"}):(a=g("<ul />",{class:"ui-timepicker-list"}),(t=g("<div />",{class:"ui-timepicker-wrapper",tabindex:-1})).css({display:"none",position:"absolute"}).append(a)),e.noneOption)if(!0===e.noneOption&&(e.noneOption=e.useSelect?"Time...":"None"),g.isArray(e.noneOption))for(var r in e.noneOption){var n=b(e.noneOption[r],e.useSelect);a.append(n)}else{n=b(e.noneOption,e.useSelect);a.append(n)}e.className&&t.addClass(e.className),null===e.minTime&&null===e.durationTime||!e.showDuration||t.addClass("ui-timepicker-with-duration");var s=e.minTime;"function"==typeof e.durationTime?s=R(e.durationTime()):null!==e.durationTime&&(s=e.durationTime);var o=null!==e.minTime?e.minTime:0,c=null!==e.maxTime?e.maxTime:o+k-1;c<=o&&(c+=k),c===k-1&&-1!==e.timeFormat.indexOf("H")&&(c=k);for(var l=e.disableTimeRanges,u=0,m=l.length,r=o;r<=c;r+=60*e.step){var p,d,f=r,h=S(f,e.timeFormat);e.useSelect?(p=g("<option />",{value:h})).text(h):((p=g("<li />")).data("time",f<=86400?f:f%86400),p.text(h)),null===e.minTime&&null===e.durationTime||!e.showDuration||(d=function(e){e=Math.round(e/60);{var i;i=Math.abs(e)<60?[e,v.mins]:60==e?["1",v.hr]:(i=(e/60).toFixed(1),[i="."!=v.decimal?i.replace(".",v.decimal):i,v.hrs])}return i.join(" ")}(r-s),e.useSelect?p.text(p.text()+" ("+d+")"):((h=g("<span />",{class:"ui-timepicker-duration"})).text(" ("+d+")"),p.append(h))),u<m&&(f>=l[u][1]&&(u+=1),l[u]&&f>=l[u][0]&&f<l[u][1]&&(e.useSelect?p.prop("disabled",!0):p.addClass("ui-timepicker-disabled"))),a.append(p)}t.data("timepicker-input",i),i.data("timepicker-list",t),e.useSelect?(a.val(y(i.val(),e)),a.on("focus",function(){g(this).data("timepicker-input").trigger("showTimepicker")}),a.on("blur",function(){g(this).data("timepicker-input").trigger("hideTimepicker")}),a.on("change",function(){H(i,g(this).val(),"select")}),i.hide().after(a)):("string"==typeof(o=e.appendTo)?o=g(o):"function"==typeof o&&(o=o(i)),o.append(t),x(i,a),a.on("click","li",function(e){i.off("focus.timepicker"),i.on("focus.timepicker-ie-hack",function(){i.off("focus.timepicker-ie-hack"),i.on("focus.timepicker",T.show)}),w(i)||i[0].focus(),a.find("li").removeClass("ui-timepicker-selected"),g(this).addClass("ui-timepicker-selected"),C(i)&&(i.trigger("hideTimepicker"),t.hide())}))}function b(e,i){var t,a,r;return"object"==(void 0===e?"undefined":_typeof(e))?(t=e.label,a=e.className,r=e.value):"string"==typeof e?t=e:g.error("Invalid noneOption value"),i?g("<option />",{value:r,class:a,text:t}):g("<li />",{class:a,text:t}).data("time",r)}function y(e,i){if(null===(e=!g.isNumeric(e)?R(e):e))return null;var t=60*i.step;return S(Math.round(e/t)*t,i.timeFormat)}function r(e){e=g(e.target);0===e.closest(".ui-timepicker-input").length&&0===e.closest(".ui-timepicker-wrapper").length&&(T.hide(),g(document).unbind(".ui-timepicker"))}function w(e){e=e.data("timepicker-settings");return(window.navigator.msMaxTouchPoints||"ontouchstart"in document)&&e.disableTouchKeyboard}function l(e,i,a){if(!a&&0!==a)return!1;var e=e.data("timepicker-settings"),r=!1,n=30*e.step;return i.find("li").each(function(e,i){var t=g(i);if("number"==typeof t.data("time")){i=t.data("time")-a;return Math.abs(i)<n||i==n?(r=t,!1):void 0}}),r}function x(e,i){i.find("li").removeClass("ui-timepicker-selected");var t=R(m(e));null===t||(e=l(e,i,t))&&(((t=e.offset().top-i.offset().top)+e.outerHeight()>i.outerHeight()||t<0)&&i.scrollTop(i.scrollTop()+e.position().top-e.outerHeight()),e.addClass("ui-timepicker-selected"))}function u(e){var i,t,a,r;""!==this.value&&((i=g(this)).data("timepicker-list"),(!i.is(":focus")||e&&"change"==e.type)&&(null!==(t=R(this.value))?(r=i.data("timepicker-settings"),a=!1,(null!==r.minTime&&t<r.minTime||null!==r.maxTime&&t>r.maxTime)&&(a=!0),g.each(r.disableTimeRanges,function(){if(t>=this[0]&&t<this[1])return!(a=!0)}),r.forceRoundTime&&((e=t%(60*r.step))>=30*r.step?t+=60*r.step-e:t-=e),r=S(t,r.timeFormat),a?H(i,r,"error")&&i.trigger("timeRangeError"):H(i,r)):i.trigger("timeFormatError")))}function m(e){return e.is("input")?e.val():e.data("ui-timepicker-value")}function H(e,i,t){var a;if(e.is("input")&&(e.val(i),(a=e.data("timepicker-settings")).useSelect&&e.data("timepicker-list").val(y(i,a))),e.data("ui-timepicker-value")!=i)return e.data("ui-timepicker-value",i),"select"==t?e.trigger("selectTime").trigger("changeTime").trigger("change"):"error"!=t&&e.trigger("changeTime"),1;e.trigger("selectTime")}function p(e){var i=g(this),t=i.data("timepicker-list");if(!t||!t.is(":visible")){if(40!=e.keyCode)return!0;w(i)||i.focus()}switch(e.keyCode){case 13:return C(i)&&T.hide.apply(this),e.preventDefault(),!1;case 38:var a=t.find(".ui-timepicker-selected");return a.length?a.is(":first-child")||(a.removeClass("ui-timepicker-selected"),a.prev().addClass("ui-timepicker-selected"),a.prev().position().top<a.outerHeight()&&t.scrollTop(t.scrollTop()-a.outerHeight())):(t.find("li").each(function(e,i){if(0<g(i).position().top)return a=g(i),!1}),a.addClass("ui-timepicker-selected")),!1;case 40:return 0===(a=t.find(".ui-timepicker-selected")).length?(t.find("li").each(function(e,i){if(0<g(i).position().top)return a=g(i),!1}),a.addClass("ui-timepicker-selected")):a.is(":last-child")||(a.removeClass("ui-timepicker-selected"),a.next().addClass("ui-timepicker-selected"),a.next().position().top+2*a.outerHeight()>t.outerHeight()&&t.scrollTop(t.scrollTop()+a.outerHeight())),!1;case 27:t.find("li").removeClass("ui-timepicker-selected"),T.hide();break;case 9:T.hide();break;default:return!0}}function d(e){var i=g(this),t=i.data("timepicker-list");if(!t||!t.is(":visible"))return!0;if(!i.data("timepicker-settings").typeaheadHighlight)return t.find("li").removeClass("ui-timepicker-selected"),!0;switch(e.keyCode){case 96:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 65:case 77:case 80:case 186:case 8:case 46:x(i,t);break;default:return}}function C(e){var i=e.data("timepicker-settings"),t=e.data("timepicker-list"),a=null,r=t.find(".ui-timepicker-selected");return!r.hasClass("ui-timepicker-disabled")&&(r.length?a=r.data("time"):m(e)&&(a=R(m(e)),x(e,t)),null!==a&&("string"==typeof a?e.val(a):H(e,S(a,i.timeFormat),"select")),1)}function S(e,i){if(null!==e){var t=new Date(c.valueOf()+1e3*e);if(!isNaN(t.getTime())){for(var a,r,n="",s=0;s<i.length;s++)switch(r=i.charAt(s)){case"a":n+=11<t.getHours()?v.pm:v.am;break;case"A":n+=11<t.getHours()?v.PM:v.AM;break;case"g":n+=0===(a=t.getHours()%12)?"12":a;break;case"G":n+=t.getHours();break;case"h":n+=0===(a=0!==(a=t.getHours()%12)&&a<10?"0"+a:a)?"12":a;break;case"H":a=t.getHours(),n+=9<(a=e===k?24:a)?a:"0"+a;break;case"i":var o=t.getMinutes();n+=9<o?o:"0"+o;break;case"s":n+=9<(e=t.getSeconds())?e:"0"+e;break;default:n+=r}return n}}}function R(e){if(""===e)return null;if(!e||e+0==e)return e;e=(e="object"==(void 0===e?"undefined":_typeof(e))?e.getHours()+":"+t(e.getMinutes())+":"+t(e.getSeconds()):e).toLowerCase();new Date(0);var i=-1===e.indexOf(":")?(i=e.match(/^([0-9]):?([0-5][0-9])?:?([0-5][0-9])?\s*([pa]?)m?$/))||e.match(/^([0-2][0-9]):?([0-5][0-9])?:?([0-5][0-9])?\s*([pa]?)m?$/):e.match(/^(\d{1,2})(?::([0-5][0-9]))?(?::([0-5][0-9]))?\s*([pa]?)m?$/);if(!i)return null;e=parseInt(+i[1],10),e=i[4]?12==e?"p"==i[4]?12:0:e+("p"==i[4]?12:0):e;return 3600*e+60*(+i[2]||0)+(+i[3]||0)}function t(e){return("0"+e).slice(-2)}g.fn.timepicker=function(e){return this.length?T[e]?this.hasClass("ui-timepicker-input")?T[e].apply(this,Array.prototype.slice.call(arguments,1)):this:"object"!==(void 0===e?"undefined":_typeof(e))&&e?void g.error("Method "+e+" does not exist on jQuery.timepicker"):T.init.apply(this,arguments):this}});