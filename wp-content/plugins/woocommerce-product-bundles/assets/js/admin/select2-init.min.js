jQuery(function(s){var c=s.fn.selectSW.amd.require("selectSW/utils"),i={language:{errorLoading:function(){return wc_enhanced_select_params.i18n_searching},inputTooLong:function(e){var t=e.input.length-e.maximum;return 1==t?wc_enhanced_select_params.i18n_input_too_long_1:wc_enhanced_select_params.i18n_input_too_long_n.replace("%qty%",t)},inputTooShort:function(e){var t=e.minimum-e.input.length;return 1==t?wc_enhanced_select_params.i18n_input_too_short_1:wc_enhanced_select_params.i18n_input_too_short_n.replace("%qty%",t)},loadingMore:function(){return wc_enhanced_select_params.i18n_load_more},maximumSelected:function(e){return 1===e.maximum?wc_enhanced_select_params.i18n_selection_too_long_1:wc_enhanced_select_params.i18n_selection_too_long_n.replace("%qty%",e.maximum)},noResults:function(){return wc_enhanced_select_params.i18n_no_matches},searching:function(){return wc_enhanced_select_params.i18n_searching}}};function l(t){t.on("select2:unselecting",function(){t.data("unselecting",!0)}).on("select2:opening",function(e){t.data("unselecting")&&(t.removeData("unselecting"),e.preventDefault())})}function o(n,a){if(n.data("sortable")&&n.prop("multiple")){var e=n.next(".select2-container").find("ul.select2-selection__rendered");a=a||{},e.sortable({placeholder:"ui-state-highlight select2-selection__choice",forcePlaceholderSize:!0,items:"li:not(.select2-search__field)",tolerance:"pointer",stop:function(){s(e.find(".select2-selection__choice").get().reverse()).each(function(){var e=c.GetData(this,"data").id,t=n.find('option[value="'+e+'"]')[0];n.prepend(t),"function"==typeof a.stop&&a.stop(n)})}})}}s.fn.sw_select2=function(c){s(":input.sw-select2",this).filter(":not(.sw-select2--initialized)").each(function(){var e=s(this),t=e.data("wrap"),n={minimumResultsForSearch:10,allowClear:!!e.data("allow_clear"),placeholder:e.data("placeholder"),closeOnSelect:!0};t&&(t="yes"!==t?"sw-select2-wrap-"+t.toString():"sw-select2-wrap",e.wrap('<div class="'+t+'"></div>')),n=s.extend(n,i),e.selectSW(n).addClass("sw-select2--initialized"),l(e),o(e)}),s(":input.sw-select2-search--products",this).filter(":not(.sw-select2--initialized)").each(function(){var t,a=s(this),e=a.data("wrap"),n={cache:!0,allowClear:!!a.data("allow_clear"),placeholder:a.data("placeholder"),minimumInputLength:a.data("minimum_input_length")?a.data("minimum_input_length"):"3",escapeMarkup:function(e){return e},ajax:{url:wc_enhanced_select_params.ajax_url,dataType:"json",delay:250,data:function(e){return{term:e.term,action:a.data("action")||"woocommerce_json_search_products_and_variations",security:wc_enhanced_select_params.search_products_nonce,exclude:a.data("exclude"),include:a.data("include"),limit:a.data("limit")}},processResults:function(e){var n=[];return"woocommerce_json_search_products_and_variations_in_component"===e.action&&("yes"===a.data("component_optional")&&n.push({id:"-1",text:wc_composite_admin_params.i18n_none}),n.push({id:"0",text:wc_composite_admin_params.i18n_all})),e&&s.each(e,function(e,t){n.push({id:e,text:t})}),{results:n}}}};e&&(e="yes"!==e?"sw-select2-wrap-"+e.toString():"sw-select2-wrap",a.wrap('<div class="'+e+'"></div>')),n=s.extend(n,i),a.selectSW(n).addClass("sw-select2--initialized"),l(a),o(a,c&&c.sortable?c.sortable:{}),!(t=a).data("sortable")&&t.prop("multiple")&&t.on("change",function(){var e=t.children();e.sort(function(e,t){var n=e.text.toLowerCase(),a=t.text.toLowerCase();return a<n?1:n<a?-1:0}),t.html(e)})}),s(":input.sw-select2-search--categories",this).filter(":not(.sw-select2--initialized)").each(function(){var e=s(this),t=e.data("wrap"),n={cache:!0,allowClear:!!s(this).data("allow_clear"),placeholder:s(this).data("placeholder"),minimumInputLength:s(this).data("minimum_input_length")?s(this).data("minimum_input_length"):3,escapeMarkup:function(e){return e},ajax:{url:wc_enhanced_select_params.ajax_url,dataType:"json",delay:250,data:function(e){return{term:e.term,action:"woocommerce_json_search_categories",security:wc_enhanced_select_params.search_categories_nonce}},processResults:function(e){var n=[];return e&&s.each(e,function(e,t){n.push({id:t.slug,text:t.formatted_name})}),{results:n}}}};t&&(t="yes"!==t?"sw-select2-wrap-"+t.toString():"sw-select2-wrap",e.wrap('<div class="'+t+'"></div>')),n=s.extend(n,i),e.selectSW(n).addClass("sw-select2--initialized")}),s(document.body).trigger("sw-select2-init")},s("html").on("wc_backbone_modal_before_remove",function(){s(".sw-select2, :input.sw-select2-search--products").filter(".select2-hidden-accessible").selectSW("close")}).on("click",function(e){this===e.target&&s(".sw-select2, :input.sw-select2-search--products").filter(".select2-hidden-accessible").selectSW("close")}),s(document.body).find(".sw-select2-autoinit").each(function(){s(this).sw_select2()})});